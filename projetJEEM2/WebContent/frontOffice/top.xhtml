<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:dgc="http://java.sun.com/jsf/composite/composants"
	xmlns:p="http://primefaces.org/ui">
	<div class="navbar navbar-fixed-top" id="toolbar">
		<div class="navbar-inner">
			<div class="container">
				<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"> 
					<span class="icon-bar"></span> 
					<span class="icon-bar"></span> 
					<span class="icon-bar"></span>
				</a> 
				<a class="brand" href="login.jsf">Book Store</a>
				<div class="nav-collapse">
					<h:form>
						<ul class="nav">
							<li>
								<a href="#{request.contextPath}/frontOffice/login.jsf">Accueil</a>
							</li>
							<li class="dropdown">
								<a class="dropdown-toggle" data-toggle="dropdown" href="#">Livres <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<ui:repeat value="#{categoryFrontController.categoriesBook}"
										var="category">
										<li>
											<h:commandLink action="#{bookFrontController.index(category.id)}" value="#{category.getTitle()}" />
										</li>
									</ui:repeat>
								</ul>
							</li>
							<h:panelGroup rendered="#{clientController.loggedIn}">
								<li>
									<a href="#{request.contextPath}/frontOffice/client/detailCommande.jsf">Mes commandes</a>
								</li>
							</h:panelGroup>
						</ul>
					</h:form>
					<!-- The drop down menu -->
					<h:panelGroup rendered="#{!clientController.loggedIn}">
						<h:form>
							<ul class="nav pull-right">
								<li>
									<a href="#{request.contextPath}/frontOffice/inscription.jsf">S'inscrire</a>
								</li>
								<li class="divider-vertical"></li>
								<li class="dropdown">
									<a class="dropdown-toggle" href="#" data-toggle="dropdown">Se connecter <strong class="caret"></strong></a>
									<div class="dropdown-menu" style="padding: 15px; padding-bottom: 0px;">
										<h:outputText value="#{strings['login']}" />
										<h:inputText id="login" value="#{loginForm.login}" required="true" />
										<h:message for="login"></h:message>
										<h:outputText value="#{strings['password']}" />
										<h:inputSecret id="password" value="#{loginForm.password}" required="true" />
										<h:message for="password"></h:message>
										<h:commandButton action="#{clientController.doLogin}" value="#{strings['submit']}" />
									</div>
								</li>
							</ul>
						</h:form>
					</h:panelGroup>
					<h:panelGroup rendered="#{clientController.loggedIn}">
						<h:form>
							<ul class="nav pull-right">
								<li>
									<a href="#{request.contextPath}/frontOffice/client/client.jsf">Mon Profil</a>
								</li>
								<li>
									<h:commandLink action="#{clientController.doLogout}" value="Se déconnecter" />
								</li>
								<h:panelGroup rendered="#{not empty panierBean.panier.items}">
									<li class="dropdown">
										<a class="dropdown-toggle" href="#" data-toggle="dropdown">Panier <strong class="caret"></strong></a>
										<div class="dropdown-menu" style="padding: 15px; padding-bottom: 0px;">
											<div id="cart_block" class="block column_box exclusive"
												style="display: block;">
												<div class="block_content toggle_content">
													<div id="cart_block_list" class="expanded">
														<div class="products clearfix">
															<ui:repeat value="#{panierBean.panier.items}" var="itemOrder">
																<div id="livre_#{itemOrder.book.id}" class="clearfix first_item">
																	<a class="cart_image">
																		<h:graphicImage name="#{itemOrder.book.photo}" library="images" />
																	</a>
																	<span class="quantity-formated">
																		<span class="quantity" style="opacity: 1;">#{itemOrder.quantity}</span>x
																	</span>
																	<p:commandLink styleClass="cart_block_product_name product_link" action="#{bookFrontController.showBook(itemOrder.book)}" value="#{itemOrder.book.getTitle()}" />
																	<span class="remove_link">
																		<h:commandButton action="#{panierBean.enleverBook(itemOrder.getBook())}" image="/resources/images/moins.png" styleClass="ajax_cart_block_remove_link moins" />
																	</span>
																	<span class="add_link">
																		<h:commandButton action="#{panierBean.addBook(itemOrder.getBook())}" image="/resources/images/plus.jpeg" styleClass="ajax_cart_block_remove_link moins" />
																	</span>  
																	<span class="price">#{itemOrder.total}€</span>
																</div>
															</ui:repeat>
														</div>
														<div class="cart-prices">
															<div class="cart-prices-block">
																<span id="cart_block_total" class="price ajax_block_cart_total">#{panierBean.panier.total}€</span> 
																<span>Total</span>
															</div>
														</div>
														<p id="cart-buttons" class="clearfix">
															<h:commandLink id="button_order_cart" styleClass="exclusive" action="#{panierBean.validerPanier()}" value="#{strings['panier.valider']}" />
														</p>
													</div>
												</div>
											</div>
										</div>
									</li>
								</h:panelGroup>
							</ul>
						</h:form>
					</h:panelGroup>
				</div>
				<!--/.nav-collapse -->
			</div>
		</div>
	</div>

</ui:composition>